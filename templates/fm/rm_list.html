<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì‹¤ì •ë³´</title>
    <link rel="stylesheet" href="/static/css/common.css">
    <style>
        /* rm_list ìŠ¤íƒ€ì¼ - fl_listì™€ ì¼ê´€ì„± ë§ì¶¤ */
        #rm_list_outer {
            padding: 20px;
            padding-bottom: 0;
            overflow-y: auto;
            background-color: #f8f9fa;
            font-size: 12px;
        }

        /* ìƒë‹¨ ì˜ì—­ */
        #rm_list_outer .top-area {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
            padding: 15px;
            background-color: white;
            border-radius: 5px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
        }

        #rm_list_outer .top-area .left-section {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        #rm_list_outer .top-area label {
            font-size: 12px;
            font-weight: bold;
            color: #495057;
            white-space: nowrap;
        }

        #rm_list_outer .top-area select {
            height: 32px;
            border-radius: 4px;
            border: 1px solid #ced4da;
            min-width: 150px; /* Adjusted min-width for selects */
            font-size: 12px;
            padding: 4px 8px;
        }

        #rm_list_outer .top-area button {
            height: 32px;
            padding: 0 12px;
            background: #fff;
            color: #333;
            border: 1px solid #ced4da;
            border-radius: 4px;
            font-size: 12px;
            cursor: pointer;
            transition: all 0.15s ease-in-out;
            margin-left: 5px; /* Added margin for buttons */
        }

        #rm_list_outer .top-area button:hover {
            background-color: #e9ecef;
            border-color: #adb5bd;
        }
        
        #rm_list_outer .top-area button.btn-primary {
            background: #007bff;
            color: white;
            border-color: #007bff;
        }

        #rm_list_outer .top-area button.btn-primary:hover {
            background: #0056b3;
            border-color: #004085;
        }


        /* ë©”ì¸ ì˜ì—­ */
        #rm_list_outer .main-area {
            background-color: white;
            border-radius: 5px;
            border: 1px solid #dee2e6;
            padding: 20px;
            height: calc(100vh - 200px); /* Adjust height as needed */
            display: flex;
            flex-direction: column;
        }

        #rm_list_outer .top-area .left-section {
            display: flex;
            align-items: center;
            gap: 15px;
            flex-wrap: wrap; /* ì¶”ê°€ */
        }

        #rm_list_outer .top-area input[type="text"] {
            height: 32px;
            padding: 0 8px;
            border: 1px solid #ced4da;
            border-radius: 4px;
            min-width: 250px;
            font-size: 12px;
        }

        /* ë°ì´í„° í…Œì´ë¸” ì˜ì—­ */
        #rm_list_outer .data-table-wrapper {
            flex: 1;
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }

        #rm_list_outer .data-table {
            flex: 1;
            overflow-y: auto;
            border: 1px solid #dee2e6;
            border-radius: 5px;
        }

        #rm_list_outer .data-table .table-header {
            display: flex;
            background: #f8f9fa;
            border-bottom: 1px solid #dee2e6;
            font-weight: bold;
            font-size: 12px;
            height: 40px;
            align-items: center;
            position: sticky;
            top: 0;
            z-index: 1;
        }

        #rm_list_outer .data-table .table-header .header-cell {
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 8px;
            border-right: 1px solid #dee2e6;
            position: relative;
            cursor: pointer;
            transition: background-color 0.15s ease;
        }

        #rm_list_outer .data-table .table-header .header-cell:hover {
            background-color: #e9ecef;
        }

        #rm_list_outer .data-table .table-header .header-cell:last-child {
            border-right: none;
        }

        /* ì •ë ¬ ì•„ì´ì½˜ */
        #rm_list_outer .data-table .sort-icon {
            position: absolute;
            right: 8px;
            width: 12px;
            height: 12px;
            background-repeat: no-repeat;
            background-position: center;
            background-size: contain;
            cursor: pointer;
        }

        /* ì •ë ¬ ì•„ì´ì½˜ - ì´ë¯¸ì§€ ëŒ€ì‹  CSSë¡œ êµ¬í˜„ */
        #rm_list_outer .data-table .sort-both::after { 
            content: 'â‡…'; 
            color: #999; 
            font-size: 10px;
        }
        #rm_list_outer .data-table .sort-asc::after { 
            content: 'â–²'; 
            color: #007bff; 
            font-size: 8px;
        }
        #rm_list_outer .data-table .sort-desc::after { 
            content: 'â–¼'; 
            color: #007bff; 
            font-size: 8px;
        }

        /* í…Œì´ë¸” ë³¸ë¬¸ */
        #rm_list_outer .data-table .table-content {
            display: block;
        }

        #rm_list_outer .data-table .table-row {
            display: flex;
            border-bottom: 1px solid #dee2e6;
            cursor: pointer;
            transition: background-color 0.15s ease;
            min-height: 36px;
            align-items: center;
        }

        #rm_list_outer .data-table .table-row:hover {
            background-color: #f8f9fa;
        }

        #rm_list_outer .data-table .table-row.selected {
            background-color: #e3f2fd;
            border-left: 3px solid #2196f3;
        }

        #rm_list_outer .data-table .table-cell {
            display: flex;
            align-items: center;
            padding: 8px;
            border-right: 1px solid #dee2e6;
            font-size: 12px;
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
        }

        #rm_list_outer .data-table .table-cell:last-child {
            border-right: none;
        }

        /* í…ìŠ¤íŠ¸ ì •ë ¬ */
        #rm_list_outer .data-table .text-center { justify-content: center; }
        #rm_list_outer .data-table .text-left { justify-content: flex-start; }
        #rm_list_outer .data-table .text-right { justify-content: flex-end; }

        /* ì»¬ëŸ¼ ë„ˆë¹„ (rm_listì— ë§ê²Œ ì¡°ì •) */
        #rm_list_outer .data-table .col-prop { width: 18%; }
        #rm_list_outer .data-table .col-building { width: 18%; }
        #rm_list_outer .data-table .col-floor { width: 18%; }
        #rm_list_outer .data-table .col-rmid { width: 14%; }
        #rm_list_outer .data-table .col-rmname { width: 14%; }
        #rm_list_outer .data-table .col-tenant { width: 18%; }

        /* í•©ê³„ í–‰ (rm_listì—ì„œëŠ” ë©´ì  í•©ê³„ê°€ ì—†ìœ¼ë¯€ë¡œ í•„ìš” ì‹œ ì¡°ì •) */
        #rm_list_outer .data-table .total-row {
            background-color: #f8f9fa;
            font-weight: bold;
            border-top: 2px solid #007bff;
        }

        /* ë¹ˆ ë°ì´í„° ë©”ì‹œì§€ */
        #rm_list_outer .data-table .empty-message {
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100px;
            color: #6c757d;
            font-size: 14px;
            border-bottom: none;
        }

        /* í˜ì´ì§€ë„¤ì´ì…˜ ì˜ì—­ */
        #rm_list_outer .pagination-area {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 15px;
            padding-top: 15px;
            border-top: 1px solid #dee2e6;
            flex-shrink: 0;
        }

        #rm_list_outer .pagination-area .pagination-left {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        #rm_list_outer .pagination-area label {
            font-size: 12px;
            color: #495057;
            white-space: nowrap;
        }

        #rm_list_outer .pagination-area select {
            width: 80px;
            height: 32px;
            border-radius: 4px;
            border: 1px solid #ced4da;
            font-size: 12px;
        }

        #rm_list_outer .pagination-area .page-info {
            font-size: 12px;
            color: #495057;
        }

        #rm_list_outer .pagination-area .page-info .highlight {
            font-weight: bold;
            color: #007bff;
        }

        /* í˜ì´ì§€ë„¤ì´ì…˜ ë²„íŠ¼ */
        #rm_list_outer .pagination {
            display: flex;
            gap: 5px;
            align-items: center;
        }

        #rm_list_outer .pagination .page-btn {
            width: 32px;
            height: 32px;
            border: 1px solid #dee2e6;
            background: white;
            color: #495057;
            border-radius: 4px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            font-size: 12px;
            transition: all 0.15s ease;
        }

        #rm_list_outer .pagination .page-btn:hover {
            background: #e9ecef;
            border-color: #adb5bd;
        }

        #rm_list_outer .pagination .page-btn.active {
            background: #007bff;
            color: white;
            border-color: #007bff;
        }

        #rm_list_outer .pagination .page-btn.disabled {
            background: #f8f9fa;
            color: #6c757d;
            cursor: not-allowed;
            opacity: 0.6;
        }

        /* ë¡œë”© í‘œì‹œ */
        #rm_list_outer .loading {
            display: flex;
            justify-content: center;
            align-items: center;
            height: 200px;
            font-size: 14px;
            color: #6c757d;
        }

        #rm_list_outer .loading .spinner {
            width: 20px;
            height: 20px;
            border: 2px solid #f3f3f3;
            border-top: 2px solid #007bff;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin-right: 10px;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* ë°˜ì‘í˜• */
        @media (max-width: 768px) {
            #rm_list_outer {
                padding: 10px;
            }
            
            #rm_list_outer .top-area {
                flex-direction: column;
                gap: 10px;
            }
            
           
        }
    </style>
</head>
<body>
    <div id="rm_list_outer">
        <div class="top-area">
            <div class="left-section">
                <label for="rm_bl_select">ê±´ë¬¼</label>
                <select id="rm_bl_select">
                    <option value="">ê±´ë¬¼ ì„ íƒ</option>
                </select>
                <label for="rm_fl_select">ì¸µ</label>
                <select id="rm_fl_select">
                    <option value="">ì¸µ ì„ íƒ</option>
                </select>
                <label for="rm_search_keyword" class="search-label">ì‹¤ ê²€ìƒ‰:</label>
                <input type="text" id="rm_search_keyword" placeholder="ì‹¤ì½”ë“œ, ì‹¤ì´ë¦„, ì‚¬ì—…ì¥ëª…, ê±´ë¬¼ëª…, ì¸µëª… ë“±">
            </div>
            <div class="right-section">
                <button type="button" id="rm_btn_search">ì¡°íšŒ</button>
                <button type="button" id="rm_btn_reset">ì´ˆê¸°í™”</button>
                <button type="button" id="rm_btn_register" class="btn-primary">ë“±ë¡</button>
            </div>
        </div>

        <div class="main-area">
            

            <div class="data-table-wrapper">
                <div class="data-table">
                    <div class="table-header">
                        <div class="header-cell col-prop text-center" data-sort="prop_name">
                            <span>ì‚¬ì—…ì¥</span>
                            <div class="sort-icon sort-both"></div>
                        </div>
                        <div class="header-cell col-building text-center" data-sort="bl_name">
                            <span>ê±´ë¬¼</span>
                            <div class="sort-icon sort-both"></div>
                        </div>
                        <div class="header-cell col-floor text-center" data-sort="fl_name">
                            <span>ì¸µ</span>
                            <div class="sort-icon sort-both"></div>
                        </div>
                        <div class="header-cell col-rmid text-center" data-sort="rm_id">
                            <span>ì‹¤ë²ˆí˜¸</span>
                            <div class="sort-icon sort-both"></div>
                        </div>
                        <div class="header-cell col-rmname text-center" data-sort="rm_name">
                            <span>ì‹¤ì´ë¦„</span>
                            <div class="sort-icon sort-both"></div>
                        </div>
                        <div class="header-cell col-tenant text-center" data-sort="tenant_names">
                            <span>ì…ì£¼ì‚¬ í˜„í™©</span>
                            <div class="sort-icon sort-both"></div>
                        </div>
                    </div>

                    <div class="table-content" id="rm_table_content">
                        <div class="loading">
                            <div class="spinner"></div>
                            ì‹¤ ì •ë³´ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...
                        </div>
                    </div>
                </div>

                <div class="pagination-area">
                    <div class="pagination-left">
                        <label for="rm_page_size">í˜ì´ì§€ë‹¹ ëª©ë¡ ìˆ˜:</label>
                        <select id="rm_page_size">
                            <option value="10" selected>10</option>
                            <option value="20">20</option>
                            <option value="50">50</option>
                            <option value="100">100</option>
                            <option value="All">ì „ì²´</option>
                        </select>
                    </div>

                    <div class="pagination" id="rm_pagination">
                        </div>

                    <div class="page-info">
                        ì „ì²´ <span class="highlight" id="rm_total_count">0</span>ê°œ | 
                        <span class="highlight" id="rm_current_page">1</span> / 
                        <span class="highlight" id="rm_total_pages">1</span> í˜ì´ì§€
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
    // ğŸ›¡ï¸ ì™„ì „í•œ ìŠ¤ì½”í”„ ë¶„ë¦¬ - ë³€ìˆ˜ ì¶©ëŒ ë°©ì§€
    (function() {
        'use strict';
        
        console.log('ğŸ¢ rm_list.html ìŠ¤í¬ë¦½íŠ¸ ì‹œì‘!');
        
        // ğŸ”¥ ê¸°ì¡´ RmListModule ì™„ì „ ì œê±° í›„ ì¬ìƒì„±
        if (typeof window.RmListModule !== 'undefined') {
            console.log('ğŸ¢ ê¸°ì¡´ RmListModule ì™„ì „ ì œê±°');
            // ê¸°ì¡´ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ì œê±°
            if (window.RmListModule.cleanup && typeof window.RmListModule.cleanup === 'function') {
                window.RmListModule.cleanup();
            }
            delete window.RmListModule;
        }
        
        // ëª¨ë“ˆ ìƒì„±
        window.RmListModule = {
            // ë°ì´í„° ì €ì¥ì†Œ
            data: {
                currentPage: 1,
                totalPages: 1,
                totalCount: 0,
                pageSize: 10,
                sortColumn: null,
                sortDirection: 'both', // 'both', 'asc', 'desc'
                blList: [], // ê±´ë¬¼ ëª©ë¡
                flList: [], // ì¸µ ëª©ë¡
                rmList: [], // ì‹¤ ëª©ë¡
                isInitialized: false,
                lastClickTime: 0,
                lastClickKey: null,
                moduleId: 'rm_list_' + Date.now() // ê³ ìœ  ID
            },
            
            // ğŸ”§ ì•ˆì „í•œ DOM ì ‘ê·¼ í—¬í¼ - rm_list ì „ìš©
            safeGetElement: function(id) {
                try {
                    const element = document.getElementById(id);
                    if (!element) {
                        console.warn('ğŸ¢ [RM] DOM ìš”ì†Œë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŒ:', id);
                    }
                    return element;
                } catch (error) {
                    console.error('ğŸ¢ [RM] DOM ì ‘ê·¼ ì˜¤ë¥˜:', error);
                    return null;
                }
            },

            // ì´ˆê¸°í™”
            init: function() {
                console.log('ğŸ¢ [RM] ì‹¤ì •ë³´ ëª©ë¡ í˜ì´ì§€ ì´ˆê¸°í™” ì‹œì‘');
                
                const em_id = window.currentEmId || (window.userInfo && window.userInfo.em_id);
                const prop_id = window.currentPropId;
                
                console.log('ğŸ¢ [RM] ë°›ì€ ë°ì´í„° (ì´ˆê¸°í™”):', { em_id, prop_id });
                
                if (!em_id) {
                    console.error('ğŸ¢ [RM] em_idê°€ ì—†ìŠµë‹ˆë‹¤.');
                    this.showError('ì‚¬ìš©ì ì •ë³´ë¥¼ ë¶ˆëŸ¬ì˜¬ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.');
                    return;
                }
                
                if (!prop_id) {
                    console.error('ğŸ¢ [RM] prop_idê°€ ì—†ìŠµë‹ˆë‹¤.');
                    this.showError('ì‚¬ì—…ì†Œë¥¼ ì„ íƒí•´ì£¼ì„¸ìš”.');
                    return;
                }
                
                this.data.isInitialized = true;
                
                // ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ë“±ë¡
                this.bindEvents();
                
                // ê±´ë¬¼ ëª©ë¡ ë¡œë“œ (ë¨¼ì €)
                this.loadBuildingList();
                
                // ì‹¤ ë°ì´í„° ë¡œë“œ (ì´ˆê¸° ë¡œë”©)
                this.loadRoomData('read');
            },
            
            // ë°ì´í„° ìƒˆë¡œê³ ì¹¨
            refreshData: function() {
                console.log('ğŸ¢ [RM] ì‹¤ì •ë³´ ë°ì´í„° ìƒˆë¡œê³ ì¹¨');
                this.loadBuildingList(); // ê±´ë¬¼ ëª©ë¡ë„ ìƒˆë¡œê³ ì¹¨
                this.loadRoomData('read'); // ì‹¤ ë°ì´í„° ìƒˆë¡œê³ ì¹¨
            },
            
            // ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ë“±ë¡
            bindEvents: function() {
                // ê²€ìƒ‰ ë²„íŠ¼
                const btnSearch = this.safeGetElement('rm_btn_search');
                if (btnSearch) {
                    btnSearch.onclick = () => {
                        this.data.currentPage = 1;
                        this.loadRoomData('search');
                    };
                }
                
                // ê²€ìƒ‰ ì…ë ¥ ì—”í„°í‚¤
                const searchKeywordInput = this.safeGetElement('rm_search_keyword');
                if (searchKeywordInput) {
                    searchKeywordInput.onkeypress = (e) => {
                        if (e.key === 'Enter') {
                            this.data.currentPage = 1;
                            this.loadRoomData('search');
                        }
                    };
                }
                
                // ì´ˆê¸°í™” ë²„íŠ¼
                const btnReset = this.safeGetElement('rm_btn_reset');
                if (btnReset) {
                    btnReset.onclick = () => {
                        this.resetFilters();
                    };
                }

                // ë“±ë¡ ë²„íŠ¼ (rm_insert.jspë¡œ ì´ë™)
                const btnRegister = this.safeGetElement('rm_btn_register');
                if (btnRegister) {
                    btnRegister.onclick = () => {
                        // HiddenFrame íƒ­ ì‹œìŠ¤í…œ ì‚¬ìš©
                        if (window.tabManager && typeof window.tabManager.addTab === 'function') {
                            window.tabManager.addTab('/fm/rm_insert.html', 'ì‹¤ë“±ë¡'); // Flask ë¼ìš°íŠ¸ë¼ë©´ .htmlë¡œ ë³€ê²½
                            if (window.showStatus) {
                                window.showStatus('ì‹¤ ë“±ë¡ í˜ì´ì§€ë¥¼ ì—´ì—ˆìŠµë‹ˆë‹¤.');
                            }
                        } else if (typeof window.loadContent === 'function') {
                            window.loadContent('/fm/rm_insert.jsp', 'ì‹¤ë“±ë¡'); // ê¸°ì¡´ JSP ë°©ì‹
                        } else {
                            console.error('ğŸ¢ [RM] íƒ­ ìƒì„± í•¨ìˆ˜ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤. rm_insert.jspë¡œ ì§ì ‘ ì´ë™');
                            document.location.href = '/fm/rm_insert.jsp';
                        }
                    };
                }
                
                // ê±´ë¬¼ ì„ íƒ ë³€ê²½
                const blSelect = this.safeGetElement('rm_bl_select');
                if (blSelect) {
                    blSelect.onchange = () => {
                        this.loadFloorList(blSelect.value); // ì„ íƒëœ ê±´ë¬¼ IDë¡œ ì¸µ ëª©ë¡ ë¡œë“œ
                        this.data.currentPage = 1;
                        this.loadRoomData('search');
                    };
                }
                
                // ì¸µ ì„ íƒ ë³€ê²½
                const flSelect = this.safeGetElement('rm_fl_select');
                if (flSelect) {
                    flSelect.onchange = () => {
                        this.data.currentPage = 1;
                        this.loadRoomData('search');
                    };
                }
                
                // í˜ì´ì§€ í¬ê¸° ë³€ê²½
                const pageSizeSelect = this.safeGetElement('rm_page_size');
                if (pageSizeSelect) {
                    pageSizeSelect.onchange = () => {
                        this.data.currentPage = 1;
                        this.data.pageSize = pageSizeSelect.value;
                        this.loadRoomData('search');
                    };
                }
                
                // ì •ë ¬ í´ë¦­ ì´ë²¤íŠ¸ - ì»¨í…Œì´ë„ˆ ë‚´ì—ì„œë§Œ
                const container = document.getElementById('rm_list_outer');
                if (container) {
                    const headers = container.querySelectorAll('.header-cell[data-sort]');
                    headers.forEach(header => {
                        header.onclick = () => {
                            const sortColumn = header.dataset.sort;
                            this.handleSort(sortColumn);
                        };
                    });
                }
                
                console.log('ğŸ¢ [RM] ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ë“±ë¡ ì™„ë£Œ');
            },
            
            // ê±´ë¬¼ ëª©ë¡ ë¡œë“œ
            loadBuildingList: function() {
                console.log('ğŸ” [RM] loadBuildingList ì‹œì‘');
                const em_id = window.currentEmId || (window.userInfo && window.userInfo.em_id);
                const prop_id = window.currentPropId;
                
                console.log('ğŸ” [RM] íŒŒë¼ë¯¸í„° ì²´í¬:', { em_id, prop_id, currentEmId: window.currentEmId, userInfo: window.userInfo, currentPropId: window.currentPropId });
                
                if (!em_id || !prop_id) {
                    console.error('ğŸ”´ [RM] í•„ìˆ˜ íŒŒë¼ë¯¸í„° ëˆ„ë½:', { em_id, prop_id });
                    return;
                }
                
                console.log('ğŸ” [RM] API í˜¸ì¶œ ì‹œì‘: fm/rm_list/get_bl_list');
                
                fetch('fm/rm_list/get_bl_list', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ em_id: em_id, prop_id: prop_id })
                })
                .then(response => {
                    if (!response.ok) {
                        throw new Error(`HTTP ${response.status}: ${response.statusText}`);
                    }
                    return response.json();
                })
                .then(data => {
                    console.log('ğŸ¢ [RM] ê±´ë¬¼ ëª©ë¡ ì‘ë‹µ:', data);
                    if (data && data.success) {
                        this.data.blList = data.data || [];
                        this.renderBuildingSelect(data.data || []);
                        // ê±´ë¬¼ ëª©ë¡ ë¡œë“œ í›„ ê¸°ë³¸ ê±´ë¬¼ ì„ íƒ (í˜„ì¬ ì„ íƒëœ ê±´ë¬¼ ìœ ì§€)
                        const blSelect = this.safeGetElement('rm_bl_select');
                        if (blSelect && window.selected_rm_bl_id) { // rm_listì—ì„œ ì„ íƒí–ˆë˜ ê±´ë¬¼ IDê°€ ìˆë‹¤ë©´
                            blSelect.value = window.selected_rm_bl_id;
                            this.loadFloorList(window.selected_rm_bl_id); // í•´ë‹¹ ê±´ë¬¼ë¡œ ì¸µ ëª©ë¡ ë¡œë“œ
                        }
                    } else {
                        console.error('ğŸ¢ [RM] ê±´ë¬¼ ëª©ë¡ ë¡œë“œ ì‹¤íŒ¨:', data ? data.message : 'Unknown error');
                        this.renderBuildingSelect([]);
                    }
                })
                .catch(error => {
                    console.error('ğŸ¢ [RM] ê±´ë¬¼ ëª©ë¡ ë¡œë“œ ì˜¤ë¥˜:', error);
                    this.renderBuildingSelect([]);
                    this.showError(`ê±´ë¬¼ ëª©ë¡ì„ ë¶ˆëŸ¬ì˜¬ ìˆ˜ ì—†ìŠµë‹ˆë‹¤: ${error.message}`);
                });
            },
            
            // ê±´ë¬¼ ì„ íƒ ì˜µì…˜ ë Œë”ë§
            renderBuildingSelect: function(buildings) {
                const select = this.safeGetElement('rm_bl_select');
                if (!select) return;
                select.innerHTML = '<option value="">ê±´ë¬¼ ì„ íƒ</option>';
                
                buildings.forEach(building => {
                    const option = document.createElement('option');
                    option.value = building.bl_id;
                    option.textContent = `${building.bl_name} (${building.bl_id})`;
                    select.appendChild(option);
                });
            },

            // ì¸µ ëª©ë¡ ë¡œë“œ
            loadFloorList: function(blId) {
                const prop_id = window.currentPropId;
                const em_id = window.currentEmId || (window.userInfo && window.userInfo.em_id);
                
                const flSelect = this.safeGetElement('rm_fl_select');
                if (!flSelect) return;
                flSelect.innerHTML = '<option value="">ì¸µ ì„ íƒ</option>'; // ì¸µ ì„ íƒ ì´ˆê¸°í™”
                this.data.flList = []; // ì¸µ ë°ì´í„° ì´ˆê¸°í™”

                if (!prop_id || !blId) {
                    console.warn('ğŸ¢ [RM] ì¸µ ëª©ë¡ ë¡œë“œ í•„ìˆ˜ íŒŒë¼ë¯¸í„° ëˆ„ë½ (ê±´ë¬¼ID ì—†ìŒ):', { prop_id, blId });
                    return;
                }

                fetch('fm/rm_list/get_fl_list', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ prop_id: prop_id, em_id: em_id, bl_id: blId })
                })
                .then(response => {
                    if (!response.ok) {
                        throw new Error(`HTTP ${response.status}: ${response.statusText}`);
                    }
                    return response.json();
                })
                .then(data => {
                    console.log('ğŸ¢ [RM] ì¸µ ëª©ë¡ ì‘ë‹µ:', data);
                    if (data && data.success) {
                        this.data.flList = data.data || [];
                        this.renderFloorSelect(data.data || []);
                        // ì¸µ ëª©ë¡ ë¡œë“œ í›„ ê¸°ë³¸ ì¸µ ì„ íƒ (í˜„ì¬ ì„ íƒëœ ì¸µ ìœ ì§€)
                        if (flSelect && window.selected_rm_fl_id) { // rm_listì—ì„œ ì„ íƒí–ˆë˜ ì¸µ IDê°€ ìˆë‹¤ë©´
                            flSelect.value = window.selected_rm_fl_id;
                        }
                    } else {
                        console.error('ğŸ¢ [RM] ì¸µ ëª©ë¡ ë¡œë“œ ì‹¤íŒ¨:', data ? data.message : 'Unknown error');
                        this.renderFloorSelect([]);
                    }
                })
                .catch(error => {
                    console.error('ğŸ¢ [RM] ì¸µ ëª©ë¡ ë¡œë“œ ì˜¤ë¥˜:', error);
                    this.renderFloorSelect([]);
                    this.showError(`ì¸µ ëª©ë¡ì„ ë¶ˆëŸ¬ì˜¬ ìˆ˜ ì—†ìŠµë‹ˆë‹¤: ${error.message}`);
                });
            },

            // ì¸µ ì„ íƒ ì˜µì…˜ ë Œë”ë§
            renderFloorSelect: function(floors) {
                const select = this.safeGetElement('rm_fl_select');
                if (!select) return;
                select.innerHTML = '<option value="">ì¸µ ì„ íƒ</option>';
                
                floors.forEach(floor => {
                    const option = document.createElement('option');
                    option.value = floor.fl_id;
                    option.textContent = `${floor.fl_name} (${floor.fl_id})`;
                    select.appendChild(option);
                });
            },
            
            // ì‹¤ ë°ì´í„° ë¡œë“œ
            loadRoomData: function(mode = 'read') {
                const em_id = window.currentEmId || (window.userInfo && window.userInfo.em_id);
                const prop_id = window.currentPropId;
                
                if (!em_id || !prop_id) {
                    console.warn('ğŸ¢ [RM] í•„ìˆ˜ íŒŒë¼ë¯¸í„° ëˆ„ë½ (ì‹¤ ë°ì´í„°):', { em_id, prop_id });
                    this.showError('ì‚¬ìš©ì ì •ë³´ ë˜ëŠ” ì‚¬ì—…ì¥ ì •ë³´ê°€ ì—†ìŠµë‹ˆë‹¤.');
                    return;
                }
                
                this.showLoading();
                
                const requestData = {
                    em_id: em_id,
                    prop_id: prop_id,
                    page_size: this.data.pageSize,
                    page_number: this.data.currentPage
                };
                
                // ê²€ìƒ‰ ì¡°ê±´ ì¶”ê°€
                if (mode === 'search' || mode === 'read') { // ì´ˆê¸° ë¡œë“œ ì‹œì—ë„ í•„í„° ì ìš©ì„ ìœ„í•´
                    const keywordInput = this.safeGetElement('rm_search_keyword');
                    const blSelect = this.safeGetElement('rm_bl_select');
                    const flSelect = this.safeGetElement('rm_fl_select');
                    
                    if (keywordInput && keywordInput.value.trim()) {
                        requestData.keyword = keywordInput.value.trim();
                    }
                    if (blSelect && blSelect.value) {
                        requestData.bl_id = blSelect.value;
                    }
                    if (flSelect && flSelect.value) {
                        requestData.fl_id = flSelect.value;
                    }
                }
                
                // ì •ë ¬ ì¡°ê±´ ì¶”ê°€
                if (this.data.sortColumn && this.data.sortDirection !== 'both') {
                    requestData.sort_column = this.data.sortColumn;
                    requestData.sort_direction = this.data.sortDirection;
                }
                
                console.log('ğŸ¢ [RM] ì‹¤ ë°ì´í„° ìš”ì²­:', { requestData });
                
                fetch('fm/rm_list/get_rm_data', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(requestData)
                })
                .then(response => {
                    if (!response.ok) {
                        throw new Error(`HTTP ${response.status}: ${response.statusText}`);
                    }
                    return response.json();
                })
                .then(data => {
                    console.log('ğŸ¢ [RM] ì‹¤ ë°ì´í„° ì‘ë‹µ:', data);
                    if (data && data.success) {
                        this.data.rmList = data.result_data || [];
                        this.data.currentPage = data.current_page || 1;
                        this.data.totalPages = data.total_pages || 1;
                        this.data.totalCount = data.total_count || 0;
                        
                        this.renderRoomTable(this.data.rmList);
                        this.renderPagination();
                        this.updateCountInfo();
                        
                        console.log('ğŸ¢ [RM] ì‹¤ ë°ì´í„° ë¡œë“œ ì™„ë£Œ:', (this.data.rmList || []).length, 'ê°œ');
                    } else {
                        console.error('ğŸ¢ [RM] ì‹¤ ë°ì´í„° ë¡œë“œ ì‹¤íŒ¨:', data ? data.message : 'Unknown error');
                        this.showError(`ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¬ ìˆ˜ ì—†ìŠµë‹ˆë‹¤: ${data ? data.message : 'Unknown error'}`);
                    }
                })
                .catch(error => {
                    console.error('ğŸ¢ [RM] ì‹¤ ë°ì´í„° ë¡œë“œ ì˜¤ë¥˜:', error);
                    this.showError(`ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤: ${error.message}`);
                });
            },
            
            // ì‹¤ í…Œì´ë¸” ë Œë”ë§
            renderRoomTable: function(roomData) {
                const tableContent = this.safeGetElement('rm_table_content');
                if (!tableContent) return;

                if (!roomData || roomData.length === 0) {
                    tableContent.innerHTML = `
                        <div class="empty-message">
                            ê²€ìƒ‰ ê²°ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤.
                        </div>
                    `;
                    return;
                }
                
                let html = '';
                
                roomData.forEach(room => {
                    const propDisplay = room.prop_name ? `${room.prop_name} (${room.prop_id})` : '';
                    const blDisplay = room.bl_name ? `${room.bl_name} (${room.bl_id})` : '';
                    const flDisplay = room.fl_name ? `${room.fl_name} (${room.fl_id})` : '';
                    
                    html += `
                        <div class="table-row" 
                            data-prop-id="${room.prop_id}" 
                            data-bl-id="${room.bl_id}" 
                            data-fl-id="${room.fl_id}"
                            data-rm-id="${room.rm_id}"
                            data-prop-name="${room.prop_name || ''}"
                            data-bl-name="${room.bl_name || ''}"
                            data-fl-name="${room.fl_name || ''}"
                            data-rm-name="${room.rm_name || ''}"
                            onclick="RmListModule.selectRoom(this)">
                            <div class="table-cell col-prop text-left">${propDisplay}</div>
                            <div class="table-cell col-building text-left">${blDisplay}</div>
                            <div class="table-cell col-floor text-left">${flDisplay}</div>
                            <div class="table-cell col-rmid text-left">${room.rm_id || ''}</div>
                            <div class="table-cell col-rmname text-left">${room.rm_name || ''}</div>
                            <div class="table-cell col-tenant text-left">${room.tenant_names || ''}</div>
                        </div>
                    `;
                });
                
                tableContent.innerHTML = html;
            },
            
            // ì‹¤ ì„ íƒ (í´ë¦­ ì‹œ rm_update í˜ì´ì§€ë¡œ ì´ë™)
            selectRoom: function(element) {
                const propId = element.dataset.propId;
                const blId = element.dataset.blId;
                const flId = element.dataset.flId;
                const rmId = element.dataset.rmId; // ì‹¤ ID ì¶”ê°€
                
                if (!propId || !blId || !flId || !rmId) { // rmIdë„ í•„ìˆ˜ë¡œ ê²€ì‚¬
                    console.log('ğŸ”´ [RM] í•„ìˆ˜ IDê°€ ì—†ìŠµë‹ˆë‹¤.');
                    return;
                }
                
                // ì¤‘ë³µ í´ë¦­ ë°©ì§€ (fl_listì—ì„œ ê°€ì ¸ì˜´)
                const clickKey = `${propId}_${blId}_${flId}_${rmId}`;
                if (this.data.lastClickKey === clickKey && (Date.now() - this.data.lastClickTime) < 1000) {
                    console.log('ğŸŸ¡ [RM] ì¤‘ë³µ í´ë¦­ ë°©ì§€');
                    return;
                }
                
                this.data.lastClickKey = clickKey;
                this.data.lastClickTime = Date.now();
                
                console.log('ğŸ”µ [RM] ì‹¤ ì„ íƒë¨:', { propId, blId, flId, rmId });
                
                // ì„ íƒëœ ì‹¤ ì •ë³´ë¥¼ ì „ì—­ ë³€ìˆ˜ì— ì €ì¥ (fl_updateì—ì„œ í™œìš©)
                window.selected_rm_prop_id = propId;
                window.selected_rm_bl_id = blId;
                window.selected_rm_fl_id = flId;
                window.selected_rm_id = rmId; // ì‹¤ ID ì „ì—­ ë³€ìˆ˜ì— ì €ì¥
                window.selected_prop_name = element.dataset.propName;
                window.selected_bl_name = element.dataset.blName;
                window.selected_fl_name = element.dataset.flName;
                window.selected_rm_name = element.dataset.rmName;
                
                // ì„ íƒ í‘œì‹œ - ì»¨í…Œì´ë„ˆ ë‚´ì—ì„œë§Œ
                const container = document.getElementById('rm_list_outer');
                if (container) {
                    container.querySelectorAll('.table-row').forEach(row => {
                        row.classList.remove('selected');
                    });
                }
                element.classList.add('selected');
                
                // rm_update í˜ì´ì§€ë¡œ ì´ë™
                this.navigateToRmUpdate(propId, blId, flId, rmId);
            },
            
            // rm_updateë¡œ ì´ë™
            navigateToRmUpdate: function(propId, blId, flId, rmId) {
                try {
                    console.log('ğŸŸ¢ [RM] rm_updateë¡œ ì´ë™:', { propId, blId, flId, rmId });
                    
                    // ğŸ’¡ í•µì‹¬: ê¸°ì¡´ rm_update íƒ­ì„ ëª¨ë‘ ì œê±°í•˜ê³  ìƒˆë¡œ ìƒì„±
                    if (window.tabManager && typeof window.tabManager.addTab === 'function') {
                        const url = `/fm/rm_update.html?prop_id=${propId}&bl_id=${blId}&fl_id=${flId}&rm_id=${rmId}`;
                        const title = `ì‹¤ìˆ˜ì •(${rmId})`;
                        
                        // ê¸°ì¡´ rm_update íƒ­ë“¤ì„ ëª¨ë‘ ì°¾ì•„ì„œ ì œê±° (íŒ¨í„´ ë§¤ì¹­)
                        if (window.tabManager.removeTabsByPattern) {
                            window.tabManager.removeTabsByPattern('fm/rm_update.html');
                        } else {
                            // fallback: ì¼ë°˜ì ì¸ rm_update íƒ­ ì œê±°
                            window.tabManager.removeTab('tab__fm_rm_update_html');
                        }
                        
                        setTimeout(() => {
                            window.tabManager.addTab(url, title);
                            if (window.showStatus) {
                                window.showStatus(`ì‹¤ìˆ˜ì • í˜ì´ì§€(${rmId})ë¥¼ ì—´ì—ˆìŠµë‹ˆë‹¤.`);
                            }
                        }, 100);
                        
                    } else if (typeof window.loadContent === 'function') {
                        // Fallback: ê¸°ì¡´ ë°©ì‹
                        const url = `/fm/rm_update.html?prop_id=${propId}&bl_id=${blId}&fl_id=${flId}&rm_id=${rmId}`;
                        window.loadContent(url, `ì‹¤ìˆ˜ì •(${rmId})`);
                        
                    } else {
                        console.error('ğŸ”´ [RM] íƒ­ ìƒì„± í•¨ìˆ˜ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.');
                    }
                    
                } catch (error) {
                    console.error('ğŸ”´ [RM] rm_update ì´ë™ ì¤‘ ì˜¤ë¥˜:', error);
                }
            },
            
            // ì •ë ¬ ì²˜ë¦¬
            handleSort: function(column) {
                if (this.data.sortColumn === column) {
                    // ê°™ì€ ì»¬ëŸ¼ í´ë¦­ì‹œ ì •ë ¬ ë°©í–¥ ë³€ê²½
                    if (this.data.sortDirection === 'both') {
                        this.data.sortDirection = 'asc';
                    } else if (this.data.sortDirection === 'asc') {
                        this.data.sortDirection = 'desc';
                    } else {
                        this.data.sortDirection = 'both';
                    }
                } else {
                    // ë‹¤ë¥¸ ì»¬ëŸ¼ í´ë¦­ì‹œ ìƒˆë¡œ ì •ë ¬
                    this.data.sortColumn = column;
                    this.data.sortDirection = 'asc';
                }
                
                this.updateSortIcons();
                this.data.currentPage = 1;
                this.loadRoomData('search');
                
                console.log('ğŸ”„ [RM] ì •ë ¬ ë³€ê²½:', { column, direction: this.data.sortDirection });
            },
            
            // ì •ë ¬ ì•„ì´ì½˜ ì—…ë°ì´íŠ¸
            updateSortIcons: function() {
                // ì»¨í…Œì´ë„ˆ ë‚´ì˜ ì •ë ¬ ì•„ì´ì½˜ë§Œ ì²˜ë¦¬
                const container = document.getElementById('rm_list_outer');
                if (!container) return;
                
                // ëª¨ë“  ì •ë ¬ ì•„ì´ì½˜ ì´ˆê¸°í™”
                container.querySelectorAll('.sort-icon').forEach(icon => {
                    icon.className = 'sort-icon sort-both';
                });
                
                // í˜„ì¬ ì •ë ¬ ì»¬ëŸ¼ ì•„ì´ì½˜ ì—…ë°ì´íŠ¸
                if (this.data.sortColumn) {
                    const headerCell = container.querySelector(`[data-sort="${this.data.sortColumn}"]`);
                    if (headerCell) {
                        const icon = headerCell.querySelector('.sort-icon');
                        if (icon) {
                            icon.className = `sort-icon sort-${this.data.sortDirection}`;
                        }
                    }
                }
            },
            
            // í˜ì´ì§€ë„¤ì´ì…˜ ë Œë”ë§
            renderPagination: function() {
                const pagination = this.safeGetElement('rm_pagination');
                if (!pagination) return;
                
                if (this.data.pageSize === 'All' || this.data.totalPages <= 1) {
                    pagination.innerHTML = '';
                    return;
                }
                
                let html = '';
                const currentPage = this.data.currentPage;
                const totalPages = this.data.totalPages;
                
                // ì´ì „ ë²„íŠ¼
                html += `
                    <button class="page-btn ${currentPage <= 1 ? 'disabled' : ''}" 
                            onclick="RmListModule.goToPage(${currentPage - 1})" 
                            ${currentPage <= 1 ? 'disabled' : ''}>â€¹</button>
                `;
                
                // í˜ì´ì§€ ë²ˆí˜¸ë“¤ (ìµœëŒ€ 5ê°œ í‘œì‹œ)
                const pageRange = 2; // í˜„ì¬ í˜ì´ì§€ ê¸°ì¤€ ì•ë’¤ 2ê°œì”©
                let startPage = Math.max(1, currentPage - pageRange);
                let endPage = Math.min(totalPages, currentPage + pageRange);

                // í˜ì´ì§€ ë²”ìœ„ ì¡°ì • (ì´ 5ê°œ í˜ì´ì§€ ë²ˆí˜¸ë¥¼ ìœ ì§€)
                const pagesToShow = 5;
                if (endPage - startPage + 1 < pagesToShow) {
                    if (currentPage <= pageRange + 1) { // ì‹œì‘ ë¶€ë¶„ì´ ë¶€ì¡±í•˜ë©´ ë’¤ë¥¼ ëŠ˜ë¦¼
                        endPage = Math.min(totalPages, startPage + pagesToShow - 1);
                    } else if (currentPage >= totalPages - pageRange) { // ë ë¶€ë¶„ì´ ë¶€ì¡±í•˜ë©´ ì•ì„ ì¤„ì„
                        startPage = Math.max(1, endPage - pagesToShow + 1);
                    }
                }

                if (startPage > 1) {
                    html += `<button class="page-btn" onclick="RmListModule.goToPage(1)">1</button>`;
                    if (startPage > 2) {
                        html += `<span style="padding: 0 5px;">...</span>`;
                    }
                }
                
                for (let i = startPage; i <= endPage; i++) {
                    html += `
                        <button class="page-btn ${i === currentPage ? 'active' : ''}" 
                                onclick="RmListModule.goToPage(${i})">${i}</button>
                    `;
                }
                
                if (endPage < totalPages) {
                    if (endPage < totalPages - 1) {
                        html += `<span style="padding: 0 5px;">...</span>`;
                    }
                    html += `<button class="page-btn" onclick="RmListModule.goToPage(${totalPages})">${totalPages}</button>`;
                }
                
                // ë‹¤ìŒ ë²„íŠ¼
                html += `
                    <button class="page-btn ${currentPage >= totalPages ? 'disabled' : ''}" 
                            onclick="RmListModule.goToPage(${currentPage + 1})" 
                            ${currentPage >= totalPages ? 'disabled' : ''}>â€º</button>
                `;
                
                pagination.innerHTML = html;
            },
            
            // í˜ì´ì§€ ì´ë™
            goToPage: function(page) {
                if (page < 1 || page > this.data.totalPages || page === this.data.currentPage) {
                    return;
                }
                
                this.data.currentPage = page;
                this.loadRoomData('search');
            },
            
            // ì¹´ìš´íŠ¸ ì •ë³´ ì—…ë°ì´íŠ¸
            updateCountInfo: function() {
                const totalCountElem = this.safeGetElement('rm_total_count');
                const currentPageElem = this.safeGetElement('rm_current_page');
                const totalPagesElem = this.safeGetElement('rm_total_pages');

                if (totalCountElem) totalCountElem.textContent = this.data.totalCount.toLocaleString();
                if (currentPageElem) currentPageElem.textContent = this.data.currentPage;
                if (totalPagesElem) totalPagesElem.textContent = this.data.totalPages;
            },
            
            // í•„í„° ì´ˆê¸°í™”
            resetFilters: function() {
                const blSelect = this.safeGetElement('rm_bl_select');
                const flSelect = this.safeGetElement('rm_fl_select');
                const searchKeywordInput = this.safeGetElement('rm_search_keyword');
                const pageSizeSelect = this.safeGetElement('rm_page_size');

                if (blSelect) blSelect.value = '';
                if (flSelect) flSelect.innerHTML = '<option value="">ì¸µ ì„ íƒ</option>'; // ì¸µ ëª©ë¡ë„ ì´ˆê¸°í™”
                if (searchKeywordInput) searchKeywordInput.value = '';
                if (pageSizeSelect) pageSizeSelect.value = '10'; // ê¸°ë³¸ í˜ì´ì§€ í¬ê¸°ë¡œ

                // ì „ì—­ ì„ íƒëœ ê°’ ì´ˆê¸°í™”
                window.selected_rm_bl_id = null;
                window.selected_rm_fl_id = null;
                window.selected_rm_id = null;

                this.data.currentPage = 1;
                this.data.pageSize = 10;
                this.data.sortColumn = null;
                this.data.sortDirection = 'both';
                
                this.updateSortIcons();
                this.loadBuildingList(); // ê±´ë¬¼ ëª©ë¡ë¶€í„° ë‹¤ì‹œ ë¡œë“œ
                this.loadRoomData('read'); // ì‹¤ ë°ì´í„°ë„ ë‹¤ì‹œ ë¡œë“œ
                
                console.log('ğŸ”„ [RM] í•„í„° ì´ˆê¸°í™” ì™„ë£Œ');
                if (window.showStatus) {
                    window.showStatus('í•„í„°ê°€ ì´ˆê¸°í™”ë˜ì—ˆìŠµë‹ˆë‹¤.');
                }
            },
            
            // ë¡œë”© í‘œì‹œ
            showLoading: function() {
                const tableContent = this.safeGetElement('rm_table_content');
                if (!tableContent) return;
                tableContent.innerHTML = `
                    <div class="loading">
                        <div class="spinner"></div>
                        ì‹¤ ì •ë³´ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...
                    </div>
                `;
            },
            
            // ì˜¤ë¥˜ í‘œì‹œ
            showError: function(message) {
                const tableContent = this.safeGetElement('rm_table_content');
                if (!tableContent) return;
                tableContent.innerHTML = `
                    <div class="empty-message" style="color: #dc3545;">
                        ${message}
                    </div>
                `;
                console.error('ğŸ”´ [RM] ì‹¤ì •ë³´ ì˜¤ë¥˜:', message);
                if (window.showStatus) {
                    window.showStatus('ì˜¤ë¥˜: ' + message);
                }
            },
            
            // ì •ë¦¬ í•¨ìˆ˜
            cleanup: function() {
                console.log('ğŸ¢ [RM] RmListModule ì •ë¦¬ ì¤‘...');
                this.data.isInitialized = false;
                // ì¶”ê°€ì ì¸ ì •ë¦¬ ì‘ì—…ì´ í•„ìš”í•˜ë©´ ì—¬ê¸°ì— ì¶”ê°€
            }
        };
        
        // ì „ì—­ ì´ˆê¸°í™” í•¨ìˆ˜ ë“±ë¡
        window.initializeRmList = function() {
            window.RmListModule.init();
        };
        
        // ìë™ ì´ˆê¸°í™” (ì¦‰ì‹œ ì‹¤í–‰)
        setTimeout(() => {
            if (!window.RmListModule.data.isInitialized) {
                console.log('ğŸ¢ [RM] RmList ìë™ ì´ˆê¸°í™” ì‹œì‘');
                window.RmListModule.init();
            } else {
                console.log('ğŸ¢ [RM] RmList ì´ë¯¸ ì´ˆê¸°í™”ë¨, ë°ì´í„°ë§Œ ìƒˆë¡œê³ ì¹¨');
                window.RmListModule.refreshData();
            }
        }, 100);
        
        console.log('ğŸ¢ [RM] RmListModule ë¡œë“œ ì™„ë£Œ');
        
    })(); // ì¦‰ì‹œ ì‹¤í–‰ í•¨ìˆ˜ ë
    </script>
</body>
</html>