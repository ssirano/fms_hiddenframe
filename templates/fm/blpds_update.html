<!-- SPA íƒ­ìš© ê±´ë¬¼ì´ë ¥ ìƒì„¸í¸ì§‘ í˜ì´ì§€ -->
<link rel="stylesheet" href="/static/css/common.css">
<style>
    /* blpds_update í˜ì´ì§€ ì „ìš© ìŠ¤íƒ€ì¼ */
    #blpds_update_outer {
        padding: 20px;
        padding-bottom: 0;
        overflow-y: auto;
        background-color: #f8f9fa;
        font-size: 12px;
    }

    #blpds_update_outer .button-area {
        text-align: right;
        margin-bottom: 15px;
        padding: 15px;
        background-color: white;
        border-radius: 5px;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
    }

    #blpds_update_outer .button-area button {
        margin-left: 5px;
        padding: 6px 12px;
        background: #fff;
        color: #333;
        border: 1px solid #ced4da;
        font-size: 12px;
        font-family: inherit;
        border-radius: 4px;
        cursor: pointer;
        transition: all 0.15s ease-in-out;
    }

    #blpds_update_outer .button-area button:hover {
        background-color: #e9ecef;
        border-color: #adb5bd;
    }

    #blpds_update_outer .button-area button.btn-primary {
        background: #007bff;
        color: white;
        border-color: #007bff;
    }

    #blpds_update_outer .button-area button.btn-primary:hover {
        background: #0056b3;
        border-color: #004085;
    }

    #blpds_update_outer .button-area button:disabled {
        opacity: 0.5;
        cursor: not-allowed;
    }

    #blpds_update_outer .content-area {
        background-color: white;
        border-radius: 5px;
        border: 1px solid #dee2e6;
        min-height: 400px;
    }

    #blpds_update_outer .form-table {
        width: 100%;
        border-collapse: collapse;
        margin-bottom: 20px;
        font-size: 12px;
    }

    #blpds_update_outer .form-table td {
        padding: 8px;
        border: 1px solid #dee2e6;
        vertical-align: middle;
    }

    #blpds_update_outer .form-table .label {
        background-color: #f8f9fa;
        font-weight: bold;
        text-align: center;
        width: 15%;
        min-width: 80px;
    }

    #blpds_update_outer .form-table input,
    #blpds_update_outer .form-table textarea {
        border: 1px solid #ced4da;
        border-radius: 4px;
        padding: 4px 6px;
        font-size: 12px;
        width: 100%;
        transition: border-color 0.15s ease-in-out, box-shadow 0.15s ease-in-out;
    }

    #blpds_update_outer .form-table input:focus,
    #blpds_update_outer .form-table textarea:focus {
        border-color: #007bff;
        outline: 0;
        box-shadow: 0 0 0 0.2rem rgba(0, 123, 255, 0.25);
    }

    #blpds_update_outer .form-table input:disabled {
        background-color: #e9ecef;
    }

    #blpds_update_outer .image-container {
        text-align: center;
        height: 250px;
        display: flex;
        align-items: center;
        justify-content: center;
        border: 1px solid #dee2e6;
        background-color: #f8f9fa;
    }

    #blpds_update_outer .image-container img {
        max-width: 400px;
        max-height: 240px;
        object-fit: contain;
    }

    #blpds_update_outer .no-image {
        color: #6c757d;
        font-style: italic;
    }

    #blpds_update_outer .file-info {
        background-color: #e9ecef;
        padding: 8px;
        border-radius: 4px;
        margin-top: 5px;
    }

    #blpds_update_outer .file-info a {
        color: #007bff;
        text-decoration: none;
    }

    #blpds_update_outer .file-info a:hover {
        text-decoration: underline;
    }

    /* ë°˜ì‘í˜• */
    @media (max-width: 768px) {
        #blpds_update_outer {
            padding: 10px;
        }
        
        #blpds_update_outer .form-table .label {
            width: 25%;
        }
        
        #blpds_update_outer .image-container img {
            max-width: 100%;
        }
    }
</style>

<div id="blpds_update_outer">
    <!-- ìƒë‹¨ ë²„íŠ¼ ì˜ì—­ -->
    <div class="button-area">
        <button type="button" id="btn_default_photo" onclick="BlpdsUpdateModule.setAsDefaultPhoto()">ê¸°ë³¸ì‚¬ì§„ë“±ë¡</button>
        <button type="button" id="btn_save" class="btn-primary" onclick="BlpdsUpdateModule.saveData()">ì €ì¥</button>
        <button type="button" id="btn_delete" onclick="BlpdsUpdateModule.deleteData()">ì‚­ì œ</button>
        <button type="button" id="btn_list" onclick="BlpdsUpdateModule.goToList()">ëª©ë¡ë³´ê¸°</button>
    </div>

    <!-- ë©”ì¸ ì»¨í…ì¸  ì˜ì—­ -->
    <div class="content-area">
        <table class="form-table">
            <tr>
                <td class="label">ì œëª©</td>
                <td style="width: 35%;">
                    <input type="text" id="title" name="title" placeholder="ì œëª©ì„ ì…ë ¥í•˜ì„¸ìš”">
                </td>
                <td class="label">í˜•ì‹</td>
                <td style="width: 35%;">
                    <input type="text" id="type_name" readonly>
                </td>
            </tr>
            <tr>
                <td class="label">ë“±ë¡ì</td>
                <td colspan="3">
                    <span id="reg_man_name"></span>
                    <input type="hidden" id="reg_man" name="reg_man">
                </td>
            </tr>
            <!-- ì´ë¯¸ì§€ ê´€ë¦¬ (type=1) -->
            <tr id="image_row_1" style="display: none;">
                <td class="label" rowspan="2">ì´ë¯¸ì§€</td>
                <td colspan="3">
                    <div class="image-container" id="image_display">
                        <div class="no-image">ì´ë¯¸ì§€ ì—†ìŒ</div>
                    </div>
                </td>
            </tr>
            <tr id="image_row_2" style="display: none;">
                <td colspan="3" style="text-align: right;">
                    <input type="file" id="filename" name="filename" accept="image/*">
                </td>
            </tr>
            <!-- íŒŒì¼ ê´€ë¦¬ (type=3) -->
            <tr id="file_row" style="display: none;">
                <td class="label">íŒŒì¼ ì²¨ë¶€</td>
                <td colspan="3" style="text-align: right;">
                    <input type="file" id="file_upload" name="file_upload">
                    <div id="current_file_info" class="file-info" style="display: none;">
                        <a href="#" id="current_file_link" target="_blank">í˜„ì¬ íŒŒì¼ ë‹¤ìš´ë¡œë“œ</a>
                    </div>
                </td>
            </tr>
            <tr>
                <td class="label" style="vertical-align: top;">ë‚´ìš©</td>
                <td colspan="3">
                    <textarea id="contents" name="contents" rows="10" placeholder="ë‚´ìš©ì„ ì…ë ¥í•˜ì„¸ìš”"></textarea>
                </td>
            </tr>
        </table>
    </div>

    <!-- íˆë“  í•„ë“œë“¤ -->
    <input type="hidden" id="auto_number" value="">
    <input type="hidden" id="bl_id" value="">
    <input type="hidden" id="type_chk" value="">
    <input type="hidden" id="prop_search" value="">
    <input type="hidden" id="maskname" value="">
    <input type="hidden" id="current_filename" value="">
    <input type="hidden" id="has_permission" value="false">
</div>

<script>
// ğŸ›¡ï¸ ì™„ì „í•œ ìŠ¤ì½”í”„ ë¶„ë¦¬ - ë³€ìˆ˜ ì¶©ëŒ ë°©ì§€
(function() {
    'use strict';
    
    console.log('ğŸ¢ blpds_update.html ìŠ¤í¬ë¦½íŠ¸ ì‹œì‘!');
    
    // ë„¤ì„ìŠ¤í˜ì´ìŠ¤ ìƒì„± - ì¤‘ë³µ ë°©ì§€
    if (typeof window.BlpdsUpdateModule !== 'undefined') {
        console.log('ğŸ¢ ê¸°ì¡´ ëª¨ë“ˆ ì¬ì‚¬ìš©');
        return; // ì´ë¯¸ ë¡œë“œë¨
    }
    
    // ëª¨ë“ˆ ìƒì„±
    window.BlpdsUpdateModule = {
        // ë°ì´í„° ì €ì¥ì†Œ
        data: {
            autoNumber: null,
            blId: null,
            typeChk: null,
            propSearch: null,
            hasPermission: false,
            isInitialized: false
        },
        
        // ì´ˆê¸°í™”
        init: function(params) {
            console.log('ğŸ¢ ê±´ë¬¼ì´ë ¥ ìƒì„¸í¸ì§‘ í˜ì´ì§€ ì´ˆê¸°í™” ì‹œì‘');
            console.log('ğŸ¢ ë°›ì€ íŒŒë¼ë¯¸í„°:', params);
            
            if (this.data.isInitialized) {
                console.log('ğŸ¢ ì´ë¯¸ ì´ˆê¸°í™”ë¨, ë°ì´í„°ë§Œ ë‹¤ì‹œ ë¡œë“œ');
                // ìƒˆë¡œìš´ íŒŒë¼ë¯¸í„°ë¡œ ë‹¤ì‹œ ë¡œë“œ
                if (params) {
                    this.data.autoNumber = params.auto_number;
                    this.data.blId = params.bl_id;
                    this.data.typeChk = params.type || '2';
                    this.data.propSearch = params.prop_search;
                }
                this.loadData();
                return;
            }
            
            // íŒŒë¼ë¯¸í„°ê°€ ì—†ìœ¼ë©´ ì „ì—­ ë³€ìˆ˜ì—ì„œ ê°€ì ¸ì˜¤ê¸°
            if (!params) {
                params = {
                    auto_number: window.selected_auto_number,
                    bl_id: window.selected_bl_id,
                    type: window.selected_file_type || '2',
                    prop_search: window.currentPropId
                };
                console.log('ğŸ¢ ì „ì—­ ë³€ìˆ˜ì—ì„œ íŒŒë¼ë¯¸í„° ìˆ˜ì§‘:', params);
            }
            
            // íŒŒë¼ë¯¸í„° ìœ íš¨ì„± ê²€ì‚¬
            if (!params.auto_number) {
                console.error('ğŸ¢ auto_numberê°€ ì—†ìŠµë‹ˆë‹¤:', params);
                alert('ì´ë ¥ ì •ë³´ê°€ ì—†ìŠµë‹ˆë‹¤. ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.');
                return;
            }
            
            // íŒŒë¼ë¯¸í„° ì„¤ì •
            this.data.autoNumber = params.auto_number;
            this.data.blId = params.bl_id;
            this.data.typeChk = params.type || '2';
            this.data.propSearch = params.prop_search;
            
            // íˆë“  í•„ë“œ ì„¤ì •
            document.getElementById('auto_number').value = this.data.autoNumber || '';
            document.getElementById('bl_id').value = this.data.blId || '';
            document.getElementById('type_chk').value = this.data.typeChk;
            document.getElementById('prop_search').value = this.data.propSearch || '';
            
            this.data.isInitialized = true;
            
            console.log('ğŸ¢ ì´ˆê¸°í™”ëœ ë°ì´í„°:', {
                autoNumber: this.data.autoNumber,
                blId: this.data.blId,
                typeChk: this.data.typeChk,
                propSearch: this.data.propSearch
            });
            
            // UI ì„¤ì •
            this.setupUI();
            
            // ë°ì´í„° ë¡œë“œ
            this.loadData();
        },
        
        // UI ì„¤ì •
        setupUI: function() {
            const typeChk = this.data.typeChk;
            const typeNameInput = document.getElementById('type_name');
            
            // íƒ€ì…ë³„ UI í‘œì‹œ/ìˆ¨ê¹€
            document.getElementById('image_row_1').style.display = typeChk === '1' ? 'table-row' : 'none';
            document.getElementById('image_row_2').style.display = typeChk === '1' ? 'table-row' : 'none';
            document.getElementById('file_row').style.display = typeChk === '3' ? 'table-row' : 'none';
            
            // íƒ€ì… ì´ë¦„ ì„¤ì •
            let typeName = '';
            if (typeChk === '1') typeName = 'ì´ë¯¸ì§€ê´€ë¦¬';
            else if (typeChk === '2') typeName = 'ì´ë ¥ê´€ë¦¬';
            else if (typeChk === '3') typeName = 'íŒŒì¼ê´€ë¦¬';
            
            typeNameInput.value = typeName;
            
            // ê¸°ë³¸ì‚¬ì§„ë“±ë¡ ë²„íŠ¼ì€ ì´ë¯¸ì§€ íƒ€ì…ì¼ ë•Œë§Œ í™œì„±í™”
            const defaultPhotoBtn = document.getElementById('btn_default_photo');
            if (defaultPhotoBtn) {
                defaultPhotoBtn.style.display = typeChk === '1' ? 'inline-block' : 'none';
            }
            
            // ë‚´ìš© textarea ë†’ì´ ì¡°ì •
            const contentsTextarea = document.getElementById('contents');
            if (typeChk === '2') {
                contentsTextarea.rows = 15; // ì´ë ¥ê´€ë¦¬ëŠ” ë” í¬ê²Œ
            } else {
                contentsTextarea.rows = 5;
            }
        },
        
        // ë°ì´í„° ë¡œë“œ
        loadData: function() {
            if (!this.data.autoNumber) {
                console.error('ğŸ¢ auto_numberê°€ ì—†ìŠµë‹ˆë‹¤.');
                return;
            }
            
            console.log('ğŸ¢ ë°ì´í„° ë¡œë“œ ì‹œì‘:', this.data.autoNumber);
            
            fetch('/fm/blpds_update/get_data', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({
                    auto_number: this.data.autoNumber,
                    bl_id: this.data.blId
                })
            })
            .then(response => response.json())
            .then(data => {
                console.log('ğŸ¢ ì„œë²„ ì‘ë‹µ ë°ì´í„°:', data);
                
                if (data.success) {
                    this.data.hasPermission = data.has_permission;
                    document.getElementById('has_permission').value = data.has_permission;
                    
                    this.populateForm(data.data);
                    this.updatePermissionUI();
                } else {
                    this.showError('ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¬ ìˆ˜ ì—†ìŠµë‹ˆë‹¤: ' + data.message);
                }
            })
            .catch(error => {
                console.error('ğŸ¢ ë°ì´í„° ë¡œë“œ ì˜¤ë¥˜:', error);
                this.showError('ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');
            });
        },
        
        // í¼ì— ë°ì´í„° ì±„ìš°ê¸°
        populateForm: function(data) {
            document.getElementById('title').value = data.title || '';
            document.getElementById('contents').value = data.contents || '';
            document.getElementById('reg_man').value = data.reg_man || '';
            document.getElementById('reg_man_name').textContent = data.reg_man_name || '';
            document.getElementById('maskname').value = data.maskname || '';
            document.getElementById('current_filename').value = data.filename || '';
            
            // ì´ë¯¸ì§€ í‘œì‹œ (type=1)
            if (this.data.typeChk === '1') {
                this.displayImage(data.maskname);
            }
            
            // íŒŒì¼ ì •ë³´ í‘œì‹œ (type=3)
            if (this.data.typeChk === '3' && data.filename) {
                this.displayFileInfo(data.filename, this.data.autoNumber);
            }
        },
        
        // ì´ë¯¸ì§€ í‘œì‹œ
        displayImage: function(maskname) {
            const imageDisplay = document.getElementById('image_display');
            
            if (maskname) {
                imageDisplay.innerHTML = `<img src="/fm/blpds_update/view_file?auto_number=${this.data.autoNumber}" alt="ì´ë¯¸ì§€">`;
            } else {
                imageDisplay.innerHTML = '<div class="no-image">ì´ë¯¸ì§€ ì—†ìŒ</div>';
            }
        },
        
        // íŒŒì¼ ì •ë³´ í‘œì‹œ
        displayFileInfo: function(filename, autoNumber) {
            const fileInfo = document.getElementById('current_file_info');
            const fileLink = document.getElementById('current_file_link');
            
            if (filename) {
                fileLink.textContent = filename;
                fileLink.href = `/fm/blpds_update/download_file?auto_number=${autoNumber}`;
                fileInfo.style.display = 'block';
            } else {
                fileInfo.style.display = 'none';
            }
        },
        
        // ê¶Œí•œ UI ì—…ë°ì´íŠ¸
        updatePermissionUI: function() {
            const hasPermission = this.data.hasPermission;
            
            // ë²„íŠ¼ í™œì„±í™”/ë¹„í™œì„±í™”
            document.getElementById('btn_save').disabled = !hasPermission;
            document.getElementById('btn_delete').disabled = !hasPermission;
            
            const defaultPhotoBtn = document.getElementById('btn_default_photo');
            if (defaultPhotoBtn) {
                defaultPhotoBtn.disabled = !hasPermission || this.data.typeChk !== '1';
            }
            
            // ì…ë ¥ í•„ë“œ ì½ê¸° ì „ìš© ì„¤ì •
            if (!hasPermission) {
                document.getElementById('title').readOnly = true;
                document.getElementById('contents').readOnly = true;
                document.getElementById('filename').disabled = true;
                
                const fileUpload = document.getElementById('file_upload');
                if (fileUpload) fileUpload.disabled = true;
                
                this.showWarning('í•´ë‹¹ ì‚¬ì—…ì¥ì˜ ê¶Œí•œì´ ì—†ìŠµë‹ˆë‹¤. ì¡°íšŒë§Œ ê°€ëŠ¥í•©ë‹ˆë‹¤.');
            }
        },
        
        // ë°ì´í„° ì €ì¥
        saveData: function() {
            if (!this.data.hasPermission) {
                alert('ì €ì¥ ê¶Œí•œì´ ì—†ìŠµë‹ˆë‹¤.');
                return;
            }
            
            if (!this.validateForm()) {
                return;
            }
            
            const formData = new FormData();
            formData.append('auto_number', this.data.autoNumber);
            formData.append('bl_id', this.data.blId);
            formData.append('title', document.getElementById('title').value);
            formData.append('contents', document.getElementById('contents').value);
            formData.append('type', this.data.typeChk);
            
            // íŒŒì¼ ì—…ë¡œë“œ ì²˜ë¦¬
            if (this.data.typeChk === '1') {
                const fileInput = document.getElementById('filename');
                if (fileInput.files[0]) {
                    formData.append('file', fileInput.files[0]);
                }
            } else if (this.data.typeChk === '3') {
                const fileInput = document.getElementById('file_upload');
                if (fileInput.files[0]) {
                    formData.append('file', fileInput.files[0]);
                }
            }
            
            console.log('ğŸ¢ ì €ì¥í•  ë°ì´í„°:', Object.fromEntries(formData));
            
            // ì €ì¥ ë²„íŠ¼ ë¹„í™œì„±í™”
            const saveBtn = document.getElementById('btn_save');
            const originalText = saveBtn.textContent;
            saveBtn.textContent = 'ì €ì¥ ì¤‘...';
            saveBtn.disabled = true;
            
            fetch('/fm/blpds_update/save_data', {
                method: 'POST',
                body: formData
            })
            .then(response => response.json())
            .then(data => {
                if (data.success) {
                    this.showSuccess('ì €ì¥ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤.');
                    
                    // ì €ì¥ í›„ ë°ì´í„° ìƒˆë¡œê³ ì¹¨
                    setTimeout(() => {
                        this.loadData();
                    }, 1000);
                } else {
                    alert('ì €ì¥ ì‹¤íŒ¨: ' + data.message);
                }
            })
            .catch(error => {
                console.error('ğŸ¢ ì €ì¥ ì˜¤ë¥˜:', error);
                alert('ì €ì¥ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');
            })
            .finally(() => {
                // ì €ì¥ ë²„íŠ¼ ë³µì›
                saveBtn.textContent = originalText;
                saveBtn.disabled = !this.data.hasPermission;
            });
        },
        
        // í¼ ìœ íš¨ì„± ê²€ì‚¬
        validateForm: function() {
            const title = document.getElementById('title').value.trim();
            
            if (!title) {
                alert('ì œëª©ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.');
                document.getElementById('title').focus();
                return false;
            }
            
            return true;
        },
        
        // ë°ì´í„° ì‚­ì œ
        deleteData: function() {
            if (!this.data.hasPermission) {
                alert('ì‚­ì œ ê¶Œí•œì´ ì—†ìŠµë‹ˆë‹¤.');
                return;
            }
            
            if (!confirm('ì •ë§ë¡œ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) {
                return;
            }
            
            fetch('/fm/blpds_update/delete_data', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({
                    auto_number: this.data.autoNumber
                })
            })
            .then(response => response.json())
            .then(data => {
                if (data.success) {
                    this.showSuccess('ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.');
                    
                    // ì‚­ì œ í›„ ëª©ë¡ìœ¼ë¡œ ì´ë™
                    setTimeout(() => {
                        this.goToList();
                    }, 1000);
                } else {
                    alert('ì‚­ì œ ì‹¤íŒ¨: ' + data.message);
                }
            })
            .catch(error => {
                console.error('ğŸ¢ ì‚­ì œ ì˜¤ë¥˜:', error);
                alert('ì‚­ì œ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');
            });
        },
        
        // ê¸°ë³¸ì‚¬ì§„ìœ¼ë¡œ ì„¤ì •
        setAsDefaultPhoto: function() {
            if (!this.data.hasPermission || this.data.typeChk !== '1') {
                alert('ê¸°ë³¸ì‚¬ì§„ ì„¤ì • ê¶Œí•œì´ ì—†ìŠµë‹ˆë‹¤.');
                return;
            }
            
            const maskname = document.getElementById('maskname').value;
            if (!maskname) {
                alert('ì„¤ì •í•  ì´ë¯¸ì§€ê°€ ì—†ìŠµë‹ˆë‹¤.');
                return;
            }
            
            if (!confirm('ì´ ì´ë¯¸ì§€ë¥¼ ê¸°ë³¸ì‚¬ì§„ìœ¼ë¡œ ì„¤ì •í•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) {
                return;
            }
            
            fetch('/fm/blpds_update/set_default_photo', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({
                    bl_id: this.data.blId,
                    maskname: maskname
                })
            })
            .then(response => response.json())
            .then(data => {
                if (data.success) {
                    this.showSuccess('ê¸°ë³¸ì‚¬ì§„ìœ¼ë¡œ ì„¤ì •ë˜ì—ˆìŠµë‹ˆë‹¤.');
                } else {
                    alert('ê¸°ë³¸ì‚¬ì§„ ì„¤ì • ì‹¤íŒ¨: ' + data.message);
                }
            })
            .catch(error => {
                console.error('ğŸ¢ ê¸°ë³¸ì‚¬ì§„ ì„¤ì • ì˜¤ë¥˜:', error);
                alert('ê¸°ë³¸ì‚¬ì§„ ì„¤ì • ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');
            });
        },
        
        // ëª©ë¡ìœ¼ë¡œ ì´ë™
        goToList: function() {
            // ê±´ë¬¼ìˆ˜ì • í˜ì´ì§€ì˜ ì´ë ¥ íƒ­ìœ¼ë¡œ ëŒì•„ê°€ê¸°
            window.selected_bl_id = this.data.blId;
            
            if (typeof window.loadContent === 'function') {
                window.loadContent('/fm/bl_update.html', `ê±´ë¬¼ìˆ˜ì •(${this.data.blId})`);
                
                // íƒ­ ì „í™˜ (ì´ë ¥ íƒ­)
                setTimeout(() => {
                    if (window.BlUpdateModule && typeof window.BlUpdateModule.showTab === 'function') {
                        window.BlUpdateModule.showTab(3);
                    }
                }, 500);
                
                window.showStatus && window.showStatus('ê±´ë¬¼ìˆ˜ì • í˜ì´ì§€ë¡œ ëŒì•„ê°‘ë‹ˆë‹¤.');
            } else {
                console.error('ğŸ¢ loadContent í•¨ìˆ˜ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.');
            }
        },
        
        // ì„±ê³µ ë©”ì‹œì§€ í‘œì‹œ
        showSuccess: function(message) {
            console.log('ğŸ¢ ì„±ê³µ:', message);
            if (window.showStatus) {
                window.showStatus(message);
            } else {
                alert(message);
            }
        },
        
        // ê²½ê³  ë©”ì‹œì§€ í‘œì‹œ
        showWarning: function(message) {
            console.warn('ğŸ¢ ê²½ê³ :', message);
            if (window.showStatus) {
                window.showStatus(message);
            }
        },
        
        // ì˜¤ë¥˜ í‘œì‹œ
        showError: function(message) {
            console.error('ğŸ¢ ì˜¤ë¥˜:', message);
            alert(message);
        }
    };
    
    // ì „ì—­ ì´ˆê¸°í™” í•¨ìˆ˜ ë“±ë¡
    window.initBlpdsUpdatePage = function(params) {
        window.BlpdsUpdateModule.init(params);
    };
    
    console.log('ğŸ¢ BlpdsUpdateModule ë¡œë“œ ì™„ë£Œ');
    
})(); // ì¦‰ì‹œ ì‹¤í–‰ í•¨ìˆ˜ ë
</script>